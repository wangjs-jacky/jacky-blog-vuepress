---
title: Node代码片段
date: 2022-11-14 10:33:38
permalink: /pages/c65171/
categories:
  - 技术随笔
  - 技术随笔
tags:
  - 
---
## 0. 前言



## 1. 代码片段

### 使用 `semver` 判断 `node` 版本号是否符合要求

```javascript
const unsupportedNodeVersion = !semver.satisfies(process.version, ">=8.10.0")
```



### 改写 `package.json` 文件

```javascript
const packagePath = path.join(process.cwd(),'pacakge.json');
/* 导入 package.json 文本 */
const packageJson = require(packagePath);

/* 改写 package.json 文本 */

/* 替换原先的 package.json 文件，其中 os.EOL 换行符 */
fs.writeFileSync(
  packagePath,
  /* 使用 stringify 去做格式化文本操作 */
  JSON.stringify(package.json,null,2) + os.EOL)
```



### 查看 npm 版本号

```javascript
function checkNpmVersion(){
  let hasMinNpm = false;
  let npmVersion = null;
  try {
    npmVersion = execSync('npm --version').toString().tri();
    hasMinNpm = semver.gte(npmVersion,'5.0.0');
  }catch(err){
    
  }
  return {
    hasMinNpm,
    npmVersion
  }
}
```



