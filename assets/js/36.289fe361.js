(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{441:function(s,t,a){"use strict";a.r(t);var e=a(19),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_0-前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-前言"}},[s._v("#")]),s._v(" 0.前言")]),s._v(" "),a("p",[s._v("在基于 "),a("code",[s._v("Promise/A+")]),s._v(" 规范编写 "),a("code",[s._v("Promise")]),s._v(" 源码时，在该规范提供的 "),a("a",{attrs:{href:"https://github.com/promises-aplus/promises-tests",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("github")]),s._v("仓库"),a("OutboundLink")],1),s._v(" 共提供了"),a("code",[s._v("872")]),s._v(" 个测试用例，其中使用到的测试技术就是 "),a("code",[s._v("mocha")]),s._v(" + "),a("code",[s._v("chai")]),s._v("。")]),s._v(" "),a("p",[s._v("最近在进行"),a("code",[s._v("coding")]),s._v("数据劫持方案时，就顺便研究了这种基于 "),a("code",[s._v("Mocha")]),s._v(" 的测试驱动开发，特此记录。")]),s._v(" "),a("p",[s._v("这种测试驱动开发的方式的好处在于代码编写结束后，自己就可以完成测试。"),a("a",{attrs:{href:"https://xiedaimala.com/tasks/a1aea219-ed79-4f1e-8dbf-c7e8301bd09b",target:"_blank",rel:"noopener noreferrer"}},[s._v("甚至有教程"),a("OutboundLink")],1),s._v("可以在完全不了解 "),a("code",[s._v("Promise")]),s._v(" 语法的情况下，先根据 "),a("code",[s._v("A+")]),s._v(" 准则编写测试案例，然后一个一个满足条件，最终完成整个"),a("code",[s._v("Promise")]),s._v("代码编写。")]),s._v(" "),a("p",[s._v("目前选择的方案如下：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("mocha")]),s._v("：提供"),a("code",[s._v("describe")]),s._v("、"),a("code",[s._v("it")]),s._v("以及终端图形化界面。")]),s._v(" "),a("li",[a("code",[s._v("chai")]),s._v("：提供"),a("code",[s._v("assert")]),s._v("断言。")]),s._v(" "),a("li",[a("code",[s._v("sinon")]),s._v("以及"),a("code",[s._v("sinonChai")]),s._v("：测试辅助工具，主要用于对函数的测试。")])]),s._v(" "),a("h2",{attrs:{id:"_1-如何同时对多个文件进行测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何同时对多个文件进行测试"}},[s._v("#")]),s._v(" 1.如何同时对多个文件进行测试")]),s._v(" "),a("p",[s._v("某个项目的测试结构如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── package.json\n├── src\n│   ├── defineProperty.js   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试场景1")]),s._v("\n│   ├── defineProperty2.js  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试场景2")]),s._v("\n│   ├── defineProperty3.js  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试场景3")]),s._v("\n│   ├── defineProperty4.js  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试场景4")]),s._v("\n│   └── proxy.js\n└── "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n    ├── index.js   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试文件1")]),s._v("\n    └── index2.js  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试文件2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("在 "),a("code",[s._v("package.json")]),s._v(" 中配置如下：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mocha test/**/*.js"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chai"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.3.6"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mocha"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^9.2.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sinon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^13.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sinon-chai"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.7.0"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("这里的"),a("code",[s._v("/**/*.js")]),s._v("使用的是 "),a("code",[s._v("Glob")]),s._v(" 匹配语法，其中 "),a("code",[s._v("**")]),s._v(" 被称为 "),a("code",[s._v("Globstar")]),s._v("，含义是同时匹配多个文件。")]),s._v(" "),a("blockquote",[a("p",[s._v("此部分见："),a("strong",[a("a",{attrs:{href:"https://github.com/isaacs/node-glob",target:"_blank",rel:"noopener noreferrer"}},[s._v(" node-glob"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=n.exports}}]);