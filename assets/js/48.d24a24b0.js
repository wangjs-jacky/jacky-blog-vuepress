(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{452:function(s,t,a){"use strict";a.r(t);var n=a(19),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_0-å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-å‰è¨€"}},[s._v("#")]),s._v(" 0.å‰è¨€")]),s._v(" "),a("p",[s._v("è¿™å—çŸ¥è¯†ç‚¹æŒºçç¢çš„ï¼ŒåŸºæœ¬éƒ½äº†è§£ï¼Œä½†æ˜¯æ€»æ˜¯æœ‰äº›å°ç‚¹æ€»æ˜¯è®°ä¸ä½ã€‚")]),s._v(" "),a("h2",{attrs:{id:"_1-cors-è·¨åŸŸç›¸å…³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cors-è·¨åŸŸç›¸å…³"}},[s._v("#")]),s._v(" 1. CORS è·¨åŸŸç›¸å…³")]),s._v(" "),a("h3",{attrs:{id:"_1-å¦‚ä½•åŒºåˆ†ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å¦‚ä½•åŒºåˆ†ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚"}},[s._v("#")]),s._v(" 1. å¦‚ä½•åŒºåˆ†ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚ï¼Ÿ")]),s._v(" "),a("p",[s._v("åªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ï¼š")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Method")]),s._v("\nHEAD\nGET\nPOST\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Headers")]),s._v("\nAccept\nAccept-Language\nContent-Language\nLast-Event-ID\nContent-Typeï¼š\n   -  application/x-www-form-urlencoded\n   -  multipart/form-data\n   -  text/plain\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("è¯·å¯¹å¦‚ä¸‹è¯·æ±‚åšå‡ºåˆ¤æ–­ï¼š")]),s._v(" "),a("div",{staticClass:"language-tsx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç®€å•è¯·æ±‚")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://crossdoman.com/api/news"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¯·æ±‚æ–¹æ³•é”™è¯¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://crossdoman.com/api/news"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PUT"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¯·æ±‚å¤´")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://crossdoman.com/api/news"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å…¸å‹åœºæ™¯ï¼šå½“ payload å­—æ®µä¸º json æ—¶ï¼Œä¹Ÿå±äºè·¨åŸŸ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://crossdoman.com/api/news"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"content-type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  method"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"_2-æœåŠ¡ç«¯å¦‚ä½•å¤„ç†ç®€å•è¯·æ±‚çš„è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æœåŠ¡ç«¯å¦‚ä½•å¤„ç†ç®€å•è¯·æ±‚çš„è·¨åŸŸ"}},[s._v("#")]),s._v(" 2.æœåŠ¡ç«¯å¦‚ä½•å¤„ç†ç®€å•è¯·æ±‚çš„è·¨åŸŸï¼Ÿ")]),s._v(" "),a("p",[s._v("ã€æµè§ˆå™¨ã€‘é»˜è®¤è¡Œä¸ºï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œå¢åŠ ä¸€ä¸ª"),a("code",[s._v("Origin")]),s._v("å­—æ®µ")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GET /cors HTTP/1.1\nOrigin: http://api.bob.com ã€è‡ªå®šæ·»åŠ ã€‘\nHost: api.alice.com\nAccept-Language: en-US\nConnection: keep-alive\nUser-Agent: Mozilla/5.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])]),s._v(" "),a("p",[s._v("ã€æœåŠ¡ç«¯ã€‘è¡Œä¸ºï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å¯¹ç®€å•è¯·æ±‚çš„å“åº”")]),s._v(" "),a("p",[s._v("åªéœ€è¦å»åˆ¤æ–­ "),a("code",[s._v("Origin")]),s._v(" æ˜¯å¦æ˜¯æŒ‡å®šæºï¼Œå¦‚æœæˆåŠŸã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Access-Control-Allow-Origin: http://api.bob.com ã€é€šè¿‡æ­¤å±æ€§åˆ¤æ–­æ˜¯å¦æˆåŠŸã€‘\nAccess-Control-Allow-Credentials: true\nAccess-Control-Expose-Headers: FooBar\nContent-Type: text/html; charset=utf-8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("ğŸš¨ æ³¨ï¼šæ­¤é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€è¯†åˆ«ï¼Œå“åº”çŠ¶æ€ç å¾ˆæœ‰å¯èƒ½ä¸º "),a("code",[s._v("200")]),s._v("ï¼Œä½†å¯è¢« "),a("code",[s._v("XMLHttpRequest")]),s._v("çš„"),a("code",[s._v("onerror")]),s._v("å›è°ƒå‡½æ•°æ•è·")])])])]),s._v(" "),a("h3",{attrs:{id:"_3-æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å¤æ‚è¯·æ±‚çš„è·¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å¤æ‚è¯·æ±‚çš„è·¨åŸŸ"}},[s._v("#")]),s._v(" 3. æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å¤æ‚è¯·æ±‚çš„è·¨åŸŸï¼Ÿ")]),s._v(" "),a("p",[s._v("ã€æµè§ˆå™¨ã€‘é»˜è®¤è¡Œä¸ºï¼š")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("OPTIONS")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" é¢„æ£€è¯·æ±‚ ï¼š åŒä¸Šï¼Œé»˜è®¤ä¹Ÿä¼šåœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œå¢åŠ ä¸€ä¸ª"),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("Origin")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("å­—æ®µ\n        â†“\nçœŸå® "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("AJAX")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("è¯·æ±‚")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("XMLHttpRequest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ç¤ºä¾‹è„šæœ¬ï¼š")]),s._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" url "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://api.alice.com/cors'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// â è·¨åŸŸ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" xhr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XMLHttpRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("       \nxhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'PUT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// â è¯·æ±‚æ–¹æ³•é”™è¯¯")]),s._v("\nxhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setRequestHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'X-Custom-Header'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// â è¯·æ±‚å¤´é”™è¯¯")]),s._v("\nxhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ã€æœåŠ¡ç«¯ã€‘è¡Œä¸ºï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å¯¹é¢„æ£€è¯·æ±‚çš„å“åº”")]),s._v(" "),a("p",[s._v("é™¤äº† "),a("code",[s._v("Access-Control-Allow-Origin")]),s._v(" å­—æ®µå¤–ï¼Œè¿˜ä¼šæ ¡éªŒå¤æ‚è¯·æ±‚é¢å¤–è¦æ±‚çš„è¯·æ±‚å¤´ï¼ˆ"),a("code",[s._v("Access-Control-Request-Method")]),s._v("ï¼‰ å’Œæ–¹æ³•ï¼ˆ"),a("code",[s._v("Access-Control-Request-Headers")]),s._v("ï¼‰")]),s._v(" "),a("p",[s._v("è·¨åŸŸè¯·æ±‚é€šè¿‡ï¼Œè¿”å›ï¼š")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("HTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\nDate: Mon, 01 Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2008")]),s._v(" 01:15:39 GMT\nServer: Apache/2.0.61 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nAccess-Control-Allow-Origin: http://api.bob.com  ã€è¯·æ±‚æºã€‘\nAccess-Control-Allow-Methods: GET, POST, PUT     ã€è¯·æ±‚æ–¹æ³•ã€‘\nAccess-Control-Allow-Headers: X-Custom-Header    ã€è¯·æ±‚å¤´ã€‘\nContent-Type: text/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("charset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf-8\nContent-Encoding: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v("\nContent-Length: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nKeep-Alive: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("timeout")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nConnection: Keep-Alive\nContent-Type: text/plain\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("è·¨åŸŸè¯·æ±‚ä¸é€šè¿‡ï¼Œè¿”å›")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("XMLHttpRequest cannot load http://api.alice.com.\nOrigin http://api.bob.com is not allowed by Access-Control-Allow-Origin.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("æ­¤é”™è¯¯å¯è¢« "),a("code",[s._v("XMLHttpRequest")]),s._v(" å¯¹è±¡çš„ "),a("code",[s._v("onerror")]),s._v(" å›è°ƒå‡½æ•°æ•è·ã€‚")])])])]),s._v(" "),a("h3",{attrs:{id:"_4-å¤æ‚è¯·æ±‚å“åº”å­—æ®µçš„-access-control-max-age-çš„å«ä¹‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¤æ‚è¯·æ±‚å“åº”å­—æ®µçš„-access-control-max-age-çš„å«ä¹‰"}},[s._v("#")]),s._v(" 4. å¤æ‚è¯·æ±‚å“åº”å­—æ®µçš„ "),a("code",[s._v("Access-Control-Max-Age")]),s._v(" çš„å«ä¹‰ï¼Ÿ")]),s._v(" "),a("p",[s._v("é¢„æ£€è¯·æ±‚åï¼ŒæœåŠ¡ç«¯å“åº”ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Access-Control-Allow-Methods: GET, POST, PUT\nAccess-Control-Allow-Headers: X-Custom-Header\nAccess-Control-Allow-Credentials: true\nAccess-Control-Max-Age: 1728000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("å…¶ä¸­ï¼Œ"),a("code",[s._v("Access-Control-Max-Age")]),s._v(" æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ç§’ã€‚ç¤ºä¾‹ä¸­ï¼Œ"),a("code",[s._v("1728000")]),s._v(" ç§’ï¼ˆå³"),a("code",[s._v("20")]),s._v("å¤©ï¼‰")]),s._v(" "),a("p",[s._v("åœ¨é¦–æ¬¡ "),a("code",[s._v("OPTIONS")]),s._v(" è¯·æ±‚åï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨çš„ "),a("code",[s._v("CORS")]),s._v(" å¤æ‚è¯·æ±‚å°±ä¼šå’Œç®€å•è¯·æ±‚ç±»ä¼¼äº†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[s._v("é¢„æ£€è¯·æ±‚åï¼Œæµè§ˆå™¨å‘é€ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("PUT /cors HTTP/1.1\nOrigin: http://api.bob.com   ã€æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ ã€‘\nHost: api.alice.com\nX-Custom-Header: value  \nAccept-Language: en-US\nConnection: keep-alive\nUser-Agent: Mozilla/5.0...\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("æœåŠ¡ç«¯å“åº”ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Access-Control-Allow-Origin: http://api.bob.com  ã€å¿…é¡»åŒ…å«ã€‘\nContent-Type: text/html; charset=utf-8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_5-æœåŠ¡ç«¯ä¸ºä»€ä¹ˆä¸æ¨è-access-control-allow-origin-è®¾ç½®ä¸ºæ˜Ÿå·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-æœåŠ¡ç«¯ä¸ºä»€ä¹ˆä¸æ¨è-access-control-allow-origin-è®¾ç½®ä¸ºæ˜Ÿå·"}},[s._v("#")]),s._v(" 5. æœåŠ¡ç«¯ä¸ºä»€ä¹ˆä¸æ¨è "),a("code",[s._v("Access-Control-Allow-Origin")]),s._v(" è®¾ç½®ä¸ºæ˜Ÿå· ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¸ "),a("code",[s._v("Cookie")]),s._v(" æœ‰å…³ï¼Œå¯¹äº "),a("code",[s._v("Cookie")]),s._v(" æ¥è¯´ï¼Œä¾ç„¶éµå¾ªåŒæºæ”¿ç­–ï¼Œåªæœ‰ç”¨æœåŠ¡å™¨åŸŸåè®¾ç½®çš„Cookieæ‰ä¼šä¸Šä¼ ï¼Œå…¶ä»–åŸŸåçš„Cookieå¹¶ä¸ä¼šä¸Šä¼ ï¼Œä¸”ï¼ˆè·¨æºï¼‰åŸç½‘é¡µä»£ç ä¸­çš„"),a("code",[s._v("document.cookie")]),s._v("ä¹Ÿæ— æ³•è¯»å–æœåŠ¡å™¨åŸŸåä¸‹çš„Cookieã€‚")]),s._v(" "),a("p",[s._v("å› æ­¤ï¼Œå¦‚æœéœ€è¦æºå¸¦ "),a("code",[s._v("Cookie")]),s._v(" ä¸€å®šè¦æŒ‡å®šæ˜ç¡®çš„ã€ä¸è¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸåã€‚")]),s._v(" "),a("h3",{attrs:{id:"_6-cookie-çš„ä½¿ç”¨æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-cookie-çš„ä½¿ç”¨æ–¹å¼"}},[s._v("#")]),s._v(" 6. "),a("code",[s._v("Cookie")]),s._v(" çš„ä½¿ç”¨æ–¹å¼")]),s._v(" "),a("p",[a("code",[s._v("ajax")]),s._v(" çš„è·¨åŸŸè¯·æ±‚é»˜è®¤ä¸ä¼šé™„å¸¦ "),a("code",[s._v("cookie")]),s._v(" ï¼ŒåŸç”Ÿ "),a("code",[s._v("ajax")]),s._v(" éœ€å¦‚ä¸‹é…ç½®ï¼š")]),s._v(" "),a("p",[s._v("å¯¹ "),a("code",[s._v("xhr")]),s._v(" çš„é…ç½®ï¼š")]),s._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// xhr ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" xhr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XMLHttpRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nxhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("withCredentials "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("å¯¹äº "),a("code",[s._v("fetch")]),s._v(" çš„é…ç½®")]),s._v(" "),a("div",{staticClass:"language-tsx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// fetch")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" credentials"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("æœåŠ¡ç«¯é…ç½®ï¼š")]),s._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[s._v("Access"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Control"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Allow"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Credential"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nAccess"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Control"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Allow"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Origin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ˜ç¡®çš„åŸŸå"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_7-cors-è¯·æ±‚ä¸­-js-å¦‚ä½•è·å–-http-çš„å“åº”å¤´ä¿¡æ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-cors-è¯·æ±‚ä¸­-js-å¦‚ä½•è·å–-http-çš„å“åº”å¤´ä¿¡æ¯"}},[s._v("#")]),s._v(" 7. "),a("code",[s._v("CORS")]),s._v(" è¯·æ±‚ä¸­ï¼Œ"),a("code",[s._v("JS")]),s._v(" å¦‚ä½•è·å– "),a("code",[s._v("http")]),s._v(" çš„å“åº”å¤´ä¿¡æ¯ï¼Ÿ")]),s._v(" "),a("p",[s._v("å¯¹äº "),a("code",[s._v("CORS")]),s._v(" è¯·æ±‚æ—¶ï¼Œé€šè¿‡ "),a("code",[s._v("XMLHttpRequest")]),s._v(" å¯¹è±¡çš„ "),a("code",[s._v("getResponseHeaders()")]),s._v(" æ–¹æ³•ï¼Œå¯ä»¥è·å–ï¼š")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("Cache-Control")])]),s._v(" "),a("li",[a("code",[s._v("Content-Language")])]),s._v(" "),a("li",[a("code",[s._v("Content-Type")])]),s._v(" "),a("li",[a("code",[s._v("Expires")]),s._v(" å’Œ "),a("code",[s._v("Last-Modified")])]),s._v(" "),a("li",[a("code",[s._v("Pragma")])])]),s._v(" "),a("p",[s._v("æ­£å¸¸åªèƒ½è®¿é—®ä»¥ä¸Šå‡ ä¸ªå“åº”ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦è®¿é—®å…¶ä½™çš„å“åº”å¤´ï¼Œéœ€è¦é€šè¿‡æœåŠ¡ç«¯è®¾ç½®")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æµè§ˆå™¨è®¿é—®çš„å¤´æ”¾å…¥ç™½åå•")]),s._v("\nAccess-Control-Expose-Headers: authorization\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("code",[s._v("JS")]),s._v(" ä»£ç ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("getResponseHeader('authorization')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_8-ä¸ºå•¥-content-type-æ”¯æŒçš„ç±»å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-ä¸ºå•¥-content-type-æ”¯æŒçš„ç±»å‹"}},[s._v("#")]),s._v(" 8. ä¸ºå•¥ "),a("code",[s._v("Content-Type")]),s._v(" æ”¯æŒçš„ç±»å‹ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¸ºå•¥ "),a("code",[s._v("Content-Type")]),s._v(" æ”¯æŒå¦‚ä¸‹å€¼ï¼š")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("application/x-www-form-urlencoded")])]),s._v(" "),a("li",[a("code",[s._v("multipart/form-data")])]),s._v(" "),a("li",[a("code",[s._v("text/plain")])])]),s._v(" "),a("p",[s._v("åŸå› ï¼Œå…¼å®¹è¡¨å• "),a("code",[s._v("form")]),s._v(" ç»„ä»¶ï¼Œåœ¨ "),a("code",[s._v("Ajax")]),s._v(" æŠ€æœ¯å‡ºç°ä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨ "),a("code",[s._v("form")]),s._v(" è¡¨å•å®ç°çš„è·¨åŸŸè¯·æ±‚ã€‚")]),s._v(" "),a("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[s._v("#")]),s._v(" å‚è€ƒèµ„æ–™")]),s._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("é˜®ä¸€å³°ï¼šè·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);