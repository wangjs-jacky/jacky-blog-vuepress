(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{510:function(s,t,e){"use strict";e.r(t);var a=e(19),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_0-前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0-前言"}},[s._v("#")]),s._v(" 0.前言")]),s._v(" "),e("p",[s._v("本篇博客是"),e("code",[s._v("node-server")]),s._v("案例的文档笔记，该项目的"),e("code",[s._v("github")]),s._v("仓库地址："),e("a",{attrs:{href:"https://github.com/wangjs-jacky/node-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/wangjs-jacky/node-server"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("主要内容：")]),s._v(" "),e("ol",[e("li",[s._v("介绍了在学习"),e("code",[s._v("node")]),s._v("阶段非常好用的三个"),e("code",[s._v("node")]),s._v("执行环境。")]),s._v(" "),e("li",[e("code",[s._v("curl")]),s._v("的基础使用。")]),s._v(" "),e("li",[s._v("借助 "),e("code",[s._v("@types/node")]),s._v(" 快速学习"),e("code",[s._v("api")]),s._v("，如对"),e("code",[s._v("request")]),s._v("设置"),e("code",[s._v("IncomingMessage")]),s._v("类属性，可以使用"),e("code",[s._v("ctril+.")]),s._v("快速查找到 "),e("code",[s._v("request")]),s._v("拥有的属性和方法。")])]),s._v(" "),e("h2",{attrs:{id:"_1-工具介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-工具介绍"}},[s._v("#")]),s._v(" 1.工具介绍")]),s._v(" "),e("h3",{attrs:{id:"javascript-执行环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#javascript-执行环境"}},[s._v("#")]),s._v(" JavaScript 执行环境")]),s._v(" "),e("p",[s._v("以下工具不宜用于生产环境：")]),s._v(" "),e("ol",[e("li",[e("p",[e("code",[s._v("node-dev")])]),s._v(" "),e("p",[s._v("当文件更新时自动重启"),e("code",[s._v("node")]),s._v("，避免每次改完代码都要重新运行。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("ts-node")])]),s._v(" "),e("p",[s._v("让"),e("code",[s._v("node")]),s._v("支持直接运行"),e("code",[s._v("TypeScript")]),s._v("代码")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("ts-node-dev")])]),s._v(" "),e("p",[s._v("同时结合上面两个工具，可以使用"),e("code",[s._v("TypeScript")]),s._v("开发"),e("code",[s._v("Node.js")]),s._v("程序，且会自动重启。")])])]),s._v(" "),e("h3",{attrs:{id:"vscode配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vscode配置"}},[s._v("#")]),s._v(" VSCode配置")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("Quick Fix")]),s._v(" 默认快捷键："),e("code",[s._v("Ctrl+.")])]),s._v(" "),e("li",[s._v("如果是"),e("code",[s._v("windows")]),s._v("电脑，可以在"),e("code",[s._v("setting.json")]),s._v("里面添加字段，目的是让"),e("code",[s._v("VSCode")]),s._v("调用"),e("code",[s._v("cmder")]),s._v("里的"),e("code",[s._v("git")]),s._v("和"),e("code",[s._v("bash")])])]),s._v(" "),e("h3",{attrs:{id:"curl基础使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#curl基础使用"}},[s._v("#")]),s._v(" curl基础使用")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# GET")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -v http://localhost:8888\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# POST")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -v -d "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=wangjiasheng"')]),s._v(" http://localhost:8888\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置请求头")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -H "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type:application/json'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置动词")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -X PUT\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JSON 请求")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -d "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name":"wangjiasheng"}\'')]),s._v(" -H "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type:application/json'")]),s._v(" http://localhost:8888\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更多参数")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" --help\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h2",{attrs:{id:"_2-创建步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建步骤"}},[s._v("#")]),s._v(" 2.创建步骤")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("npm init -y")])]),s._v(" "),e("li",[s._v("新建"),e("code",[s._v("index.ts")]),s._v("文件")]),s._v(" "),e("li",[e("code",[s._v("npm install -D @types/node")]),s._v("安装"),e("code",[s._v("node")]),s._v("声明文件")]),s._v(" "),e("li",[s._v("引入"),e("code",[s._v("http")]),s._v("模块（"),e("code",[s._v("VSCode")]),s._v("使用"),e("code",[s._v("ctrl+.")]),s._v("自动导入）")]),s._v(" "),e("li",[s._v("用"),e("code",[s._v("http")]),s._v("创建"),e("code",[s._v("server")]),s._v("（"),e("code",[s._v("createServer()")]),s._v("）")]),s._v(" "),e("li",[s._v("监听"),e("code",[s._v("server")]),s._v("的"),e("code",[s._v("request")]),s._v("事件")]),s._v(" "),e("li",[e("code",[s._v("server.listen(8888)")]),s._v("开始监听"),e("code",[s._v("8888")]),s._v("端口")]),s._v(" "),e("li",[s._v("使用"),e("code",[s._v("curl -v http://localhost:8888")]),s._v("发请求")])]),s._v(" "),e("h2",{attrs:{id:"_3-类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-类"}},[s._v("#")]),s._v(" 3.类")]),s._v(" "),e("h3",{attrs:{id:"http-server类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-server类"}},[s._v("#")]),s._v(" http.Server类")]),s._v(" "),e("p",[s._v("✔️需要根据文档知道"),e("code",[s._v("http.createServer()")]),s._v("的返回值的类型")]),s._v(" "),e("p",[s._v("✔️了解"),e("code",[s._v("server")]),s._v("拥有几个事件和方法")]),s._v(" "),e("blockquote",[e("p",[s._v("目前只使用了"),e("code",[s._v("request")]),s._v("事件和"),e("code",[s._v("listen()")]),s._v("方法。")])]),s._v(" "),e("p",[s._v("✔️根据文档知道"),e("code",[s._v("http.Server")]),s._v("继承了"),e("code",[s._v("net.Server")]),s._v("类，并找到"),e("code",[s._v("net.Server")]),s._v("类拥有的事件和方法。")]),s._v(" "),e("h3",{attrs:{id:"request-response-是什么类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-response-是什么类型"}},[s._v("#")]),s._v(" (request,response)是什么类型？")]),s._v(" "),e("p",[s._v("✔️通过"),e("code",[s._v("console.log(request.constructor)")]),s._v("可以知道"),e("code",[s._v("http.IncomingMessage")]),s._v("的实例")]),s._v(" "),e("p",[s._v("✔️通过"),e("code",[s._v("console.log(response.constructor)")]),s._v("可以知道"),e("code",[s._v("http.ServerResponse")]),s._v("的实例")]),s._v(" "),e("h2",{attrs:{id:"_4-如何使用node-js获取请求内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-如何使用node-js获取请求内容"}},[s._v("#")]),s._v(" 4.如何使用"),e("code",[s._v("Node.js")]),s._v("获取请求内容")]),s._v(" "),e("p",[s._v("在对"),e("code",[s._v("request")]),s._v(" 和 "),e("code",[s._v("response")]),s._v("设置指定类后，无需查阅官网，也可以快速知道 "),e("strong",[s._v("变量")]),s._v(" 有什么属性和方法。")]),s._v(" "),e("h3",{attrs:{id:"get请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get请求"}},[s._v("#")]),s._v(" get请求")]),s._v(" "),e("div",{staticClass:"language-typescript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-typescript"}},[e("code",[s._v("server"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'request'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("IncomingMessage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ServerResponse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("method"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("header"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" request\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"post请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#post请求"}},[s._v("#")]),s._v(" post请求")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -v -d "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=wangjiasheng"')]),s._v(" http://localhost:8888\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("code",[s._v("Node.js")])]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[s._v("server"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'request'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("response")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\trequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("fn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取消息体")]),s._v("\n\trequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'end'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("fn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 拼接消息体")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);